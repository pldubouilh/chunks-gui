# Chunks Cli Poc

Chunks presents a decentralised way to distribute content. The content is generated by a webmaster, and spread out to the interested peers in a decentralised way via bittorrent and its DHT. And it's all nicely wrapped up with electron, so it should be smooth to use.

It's basically doing this :

![](desc.png)

### Install

`npm install .` then see build binary with `npm run-script packageMac` (OSX Only - other OS see [electron-packager](https://github.com/maxogden/electron-packager)). Run the package with `npm run-script start-package`.

There's also a nice binary [available here](https://github.com/pldubouilh/chunks-gui/releases/download/v0.1/Chunks.zip) (still OSX only sorry !)

### How to use

Click on the menu, and add my test server key : `d6c6a7b738deea4961a2f97d2bafe84583ad6d3c9c40566900da929811305028`

Meanwhile the dht should do its magic and connect itself. Re-open the menu, and click on the key you just added. My test blog will be loaded and displayed. Updates will incrementally be downloaded every 5 mins.

For the servers side stuff look at [chunks-server](https://github.com/pldubouilh/chunks-server). Have a look, posting your own content should be fairly seamless !

### Further work

* Move to a chrome extension
* Keep one backup of older stuff ?
* Keys on DNS entry > See [RFC2538](https://tools.ietf.org/html/rfc2538}) ?


### Todo Gui

* Gracefully exit (destroy all the things)
* Treat spam click - Load bar to mitigate people's crazyness ?
* Rename key dblclick on label ?
* Switch to turn off all networking
* Switch to roll previous backup
* Auto connect after user clicked, but DHT wasn't connected
* Move downloaded stuff to a more user-friendly place

### AVs

* Sybil attacks. [This paper](https://www.cl.cam.ac.uk/~lw525/publications/security.pdf)
* Key updates: Lying member of the DHT pushing BS. >> Should not be an issue as each user is verifying incoming stuff but possible DOS.
* Some kind of solution would be to poll multiple times and get some kind of vote system
* Multiple DHT spots (and keypair) to mitigate Sybil. Sharing same token, so possible to detect update easily.
* Investigate the possibility to use each key once, with some kind of chain so we could always be on the move.


##### Key updates :

* Update keys on the go > New (signed) public key on DHT means new pub key to use
* Disabling old key  >> Set token to INT_MAX, so no further update possible, even if previous priv key's lost. Possible to follow path from old key to new key
* Use a new keypair at each use so we don't sit on the same DHT spot each time. [As @substack noticed](https://gist.github.com/substack/eadd13302d785dc13aac) it's fairly easy to generate stuff close to a targeted hash. Chaining the next public key to the DHT payload could mitigate that, but it would also require to update things fairly often...
* Attach signed DHT packet to magnet link, so every user (and not only the webmaster) can refresh DHT as DHT requires the keys to be updated at least every hour [>> see BEP44](http://www.bittorrent.org/beps/bep_0044.html). External delegates could also gracefully help keeping the DHT updated.
  * Doesn't seems possible as the node-id is signed along the content. That (unfortunately) prevent other nodes to push content for that node-id :sadface:

### Readings

* [IPFS](https://github.com/ipfs/ipfs/blob/master/papers/ipfs-cap2pfs/ipfs-p2p-file-system.pdf?raw=true)

### Deps

This project wouldn't exists without [webtorrent](https://github.com/feross/webtorrent). Many thanks to @feross and all the amazing contributors !
